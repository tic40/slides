# Creative Lunchアプリ開発の裏側

---

## who am i

---

<img src="./img/profile.jpg" style="width: 30%">

- 最近はずっとフロントエンドjs書いてます

---

## 今回の話

Creative Lunchアプリ作成の裏側

---

## Creative Lunchとは?

---

月に1度、社員で4〜5名のランチグループを作り社内交流を図るレアジョブの制度。

税抜き1500円までは会社が負担。

---

## 「4〜5名のランチグループ」

---

## どうやってグループ決めてるの？

---

### ＿人人人人人人人人人人人人人人＿<br />
### ＞　HRチームが手作業で作成　＜<br />
### ￣Y^Y^Y^Y^Y^Y^Y^Y^Y^Y^Y^Y^Y￣<br />

---

開始当初は乱択でグループを自動生成していた。

が、徐々にクレームが出てくる。

---

## よくあるクレーム 1

同じ人と何回もグループになってる。偏りをなんとかして!

---

## よくあるクレーム 2

連続でランチの調整役にされた！調整役は平等に割り当てて欲しい！

---

## よくあるクレーム 3

普段話さない他部署の人と組むようにして欲しい！

---

結果、担当者が毎月数時間かけて過去データ参照しながらグループ分け作ることに...

---

## エンジニアリングで解決しよう

---

Webアプリケーション作りました。

<img src="img/Lunchbox.png">

---

## Demo

http://172.16.110.217:8000/

---

## アルゴリズム

---

グループマッチングに、協調フィルタリングの概念を応用すればいけそう

https://ja.wikipedia.org/wiki/%E5%8D%94%E8%AA%BF%E3%83%95%E3%82%A3%E3%83%AB%E3%82%BF%E3%83%AA%E3%83%B3%E3%82%B0

---

## ざっくり

- 2者間の過去のマッチング履歴、プロフィールから評価値を算出
- 評価値を元に、最適なグループを自動生成

---

## 2者間の評価値計算方法

- 参照するデータは、直近12ヶ月分のグループマッチデータ+現在の従業員情報
- 同じポジション(TM,TL,DH..)の場合 評価値+1
- 同じ部署の場合 +2
- 過去12ヶ月にマッチしたことがある 回数*4

評価値が高い人 イコール すでに交流がありそう

なので評価値の低い人同士を組ませれば良い感じのグループになりそう

---

## グループ選出手順

1. 全メンバーをシャッフル
1. グループ1人目: メンバーを上から順に各グループに一人入れる
1. 2人目以降: 対象メンバーと全てのグループとの相関(評価値)を算出して比較し、もっとも適しているグループに順番に入れていく。これを最後の１人までループ

---

## 調整役選出

グループ選出後に、そのグループの中で過去12ヶ月に最も調整役になった回数が少ない人のなかからランダム選出

<small>なので、新入社員は高確率で調整役になる...</small>

---

## ソース

https://rsds.rarejob.com/app/techcamp2017-teamR/tree/dev_inoue

---

## THANK YOU FOR LISTENING!

